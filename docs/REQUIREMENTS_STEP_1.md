## ✅ 프로그래밍 요구 사항

# 🚀 기능 명세서

- [x] 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
- [x] 로또 1장의 가격은 1,000원이다.
- [x] 로또 구매내역과 각 티켓을 출력한다.
- [x] 당첨 번호와 보너스 번호를 입력받는다.
- [x] 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력한다.
- [x] 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.

```
1등: 6개 번호 일치 / 2,000,000,000원
2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
3등: 5개 번호 일치 / 1,500,000원
4등: 4개 번호 일치 / 50,000원
5등: 3개 번호 일치 / 5,000원
```

- [x] 로또 번호는 오름차순으로 정렬하여 보여준다.
- [x] 당첨 통계를 출력한 뒤에는 재시작/종료 여부를 입력받는다.
- [x] 재시작할 경우 구입 금액 입력부터 게임을 다시 시작하고, 종료하는 경우 그대로 프로그램을 종료시킨다.
- [x] 사용자가 잘못된 값을 입력한 경우 throw문을 사용해 예외를 발생시키고, 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.

### 실행 결과 예시

```shell
> 구입금액을 입력해 주세요.8000
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]

> 당첨 번호를 입력해 주세요. 1,2,3,4,5,6

> 보너스 번호를 입력해 주세요. 7

당첨 통계
--------------------
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.

> 다시 시작하시겠습니까? (y/n)
```

### Flow

- 구입 금액 입력
- 로또 발행
- 당첨금액 입력
- 보너스 번호 입력
- 당첨 통계 계산
- 당첨 통계 및 결과 출력

---

- [x] 구매할 로또 금액을 입력 받는다.
- [x] 유효성을 검사한다.
- [x] 상점을 추가한다.(Model)
  - [x] 상점은 생성자에서 판매 물건을 DI 받는다.
  - [x] 가격은? 고민해보기. 물품에서 getter를 둘 것인지, 상수로 생성자에 전달할 것인지.
- [x] 로또의 개수를 계산한다.
- [x] 로또를 생성한다.
- [x] 당첨 번호와 보너스 번호를 입력 받는다.

## 로또

- [x] ~~로또 가격 field에 가격 상수를 할당한다.~~
  - [x] ~~store에 가격을 알릴 수 있는 getter를 제공한다.~~
  - [x] Product(LottoTicket) Model가 Store에서 사용되기 위해 가격 field 만들어야한다는 것은 논리적으로 오류가 있는 것 같음. Store 개념을 적용하지 않았더라면, 해당 모델에는 가격 field와 getter가 없었을 것. 다른 도메인에서 재사용도 불가. 즉, 잘못 설계한 것으로 판단했고, 가격을 알고있는 것은 Store의 역할이며 Product에 작성된 Price관련 로직을 제거하기로 판단.

```ts
{
  numbers: number[],
  bonusNumber: number,
}
```

## 판매대

- [x] 판매할 물건(product)와 가격(price)을 주입받는다.

```js
class Store {
  #product;
  #price;

  constructor(product, price) {
    this.#product = product;
    this.#price = price;
  }
}
```

- [x] 구매자(Player)에게 금액(Number) 받는다.
  - [x] `0` 이하의 값은 예외처리 한다.
- [x] 입력받은 금액을 price로 나눈 값만큼 product를 생성하여 구매자(Player)에게 전달한다.
  - [x] 구매금액보다 가격이 높은 경우 예외처리 한다.
- [x] 등록되지 않은 상품을 구매할 시, 예외처리 한다.

---

## 🚀 Feedback

### 오버엔지니어링 경계하기

- DI가 왜 필요한가? 공부하기.

  - [x] DI의 장점과 단점 파악하기.
    - 복잡성 증가 / 주입된 객체의 추적이 어려움
  - [x] DI를 대체할 수 있는 방식 확인해보기.
    - 전략 패턴 / 팩토리 패턴 등
    - 그냥 setStore 메서드에서 new Lotto() 바로 넣어줘도 될 듯? 일단 상점을 만들어뒀으니, 이를 상속받아 LottoStore하나 만들고, Lotto인데, 이 정도 결합도는 괜찮지 않나..!
  - [x] 블로그 글 간단하게 정리하기.
  - [x] 불필요한 Store 객체 및 PRODUCT 상수 제거하기.
  - [x] Store를 LottoStore로 대체하기.
    - [x] 해당 객체는 LottoCorporation에 바로 할당 해주기.

- Class를 잘 사용하는지 점검하기.

  - [ ] Class가 왜 필요한지 공부하기.
  - [ ] 현재 방식에서 Class를 잘 사용하고있는가 다시 전체적으로 점검하기.
  - [ ] `잘하고 있는 것` / `못하고 있는 것` 구분해서 정리하기.
  - [ ] 블로그 글 간단하게 정리하기.

- 너무 확장성에 연연하지 말고, 명확히 필요한 것들만 깔끔하게 정리하기.

  - [x] 불필요한 상수 제거.
  - [x] 불필요한 주석 제거.
  - [x] 불필요한 추상화 제거.
    - [x] sort 메서드 LottoTicket 로직 내부로 이동.

- 네이밍 및 가독성 개선하기.
  - [ ] Validator.View 이런 방식은 오해를 일으킬 수 있으니, 네이밍 방식 개선해보기.

### Validator

- [x] 인자가 3개를 넘는다면, 객체로 주고받는다.
- [x] `isNumbersUnique` 내부 로직에 더 좋은 방법이 없나, 고민해보기. 그리고 그 이유 작성하기. (왜 더 나은지.)
- [x] 공통 유틸인지 확인하고, 도메인에 따라 다시 분리하기.

### src/utils/lottoPrize.js

- [ ] Prize 값(키)이 없을 때, 대응값 추가하기.

### TestCode

- jest API 최대한 이용하기.

  - [x] forEach 대신 `each` 메서드 사용하기.
  - [x] toBe(true) 대신 `toBoTruthy` 메서드 사용하기.

- [x] getRandomIntInRange 테스트코드 추가.
- [ ] utils함수들 테스트코드 진행.

- 변수 네이밍 개선하기
  - [x] boolean값은 `is-`, `toBe-` 등으로 `Boolean Flag` 사용하기.

### 의존성 모듈

- [x] babel 공부하기.
  - [x] 현재 프로젝트에 적용된 의존성 모듈 공부하기.
  - [x] 불필요한 의존성 모듈 제거하기.

---

## 이번 PR 목표

- 불필요한 추상화하지 않기.
- 오버엔지니어링 경계하기.
- Class를 어떻게하면 잘 쓸지 고민해보기.
- 기존 PR들 많이 확인해보고 가져올 수 있는 것들은 가져오기.

### Error

- [ ] 진영님 PR을 참고하여 Error 도메인 분리하기.
